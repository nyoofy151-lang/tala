<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Fitness</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
    --dark-bg: #121212;
    --dark-card: #1e1e1e;
    --accent: #0af;
    --accent-hover: #33cfff;
    --text-light: #ffffff;
    --text-dark: #000000;
}
body {
    background: var(--dark-bg);
    color: var(--text-light);
    font-family: Arial, sans-serif;
}
body.light {
    background: #f0f0f0;
    color: var(--text-dark);
}
.card {
    background: var(--dark-card);
    border-radius: 16px;
    border: none;
    color: var(--text-light);
}
body.light .card {
    background: #fff;
    color: var(--text-dark);
}
.btn-main {
    background: var(--accent);
    color: white;
    border-radius: 10px;
    transition: 0.2s;
}
.btn-main:hover {
    background: var(--accent-hover);
}
.page { display: none; }
.page.active { display: block; }
.navbar { background: #000 !important; }
.nav-btn {
    cursor: pointer;
    padding: 10px 15px;
    margin: 5px;
    background: var(--dark-card);
    border-radius: 10px;
    display: inline-block;
    color: var(--text-light);
    transition: 0.2s;
}
.nav-btn:hover {
    background: var(--accent);
    color: black;
}
.category-pill {
    padding: 8px 15px;
    background: #222;
    border-radius: 20px;
    margin: 5px;
    cursor: pointer;
    color: var(--text-light);
    transition: 0.2s;
}
.category-pill:hover {
    background: var(--accent);
    color: black;
}
input, select {
    background: #2a2a2a !important;
    color: white !important;
    border: none !important;
}
body.light input, body.light select {
    background: #fff !important;
    color: #000 !important;
}
.table-dark {
    background: var(--dark-card);
    color: var(--text-light);
}
body.light .table-dark {
    background: #fff;
    color: #000;
}
.hidden { display: none; }
.progress-img { width: 100%; border-radius: 12px; }
.position-relative button {
    position: absolute;
    top: 5px;
    left: 5px;
    font-size: 14px;
    padding: 2px 5px;
}
</style>
</head>
<body>

<!-- NAVIGATION -->
<nav class="navbar navbar-dark p-3 mb-4">
    <div class="container d-flex justify-content-between">
        <h3 class="m-0">ğŸ‹â€â™‚ Ultra Fitness</h3>
        <button class="btn btn-main" onclick="toggleTheme()">ğŸŒ“ ÙˆØ¶Ø¹</button>
    </div>
</nav>

<!-- TOP NAV -->
<div class="container mb-4 text-center">
    <span class="nav-btn" onclick="showPage('home')"><i class="fa fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
    <span class="nav-btn" onclick="showPage('workouts')"><i class="fa fa-dumbbell"></i> Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</span>
    <span class="nav-btn" onclick="showPage('week')"><i class="fa fa-calendar-week"></i> Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</span>
    <span class="nav-btn" onclick="showPage('progress')"><i class="fa fa-chart-line"></i> Ø§Ù„ØªÙ‚Ø¯Ù…</span>
    <span class="nav-btn" onclick="showPage('stats')"><i class="fa fa-chart-bar"></i> Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</span>
    <span class="nav-btn" onclick="showPage('settings')"><i class="fa fa-gear"></i> Ø¥Ø¯Ø§Ø±Ø©</span>
</div>

<!-- HOME PAGE -->
<div class="container page active" id="home">
    <div class="card p-4 mb-4">
        <h2>ğŸ”¥ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ultra Fitness</h2>
        <p>Ø£Ù‚ÙˆÙ‰ Ù†Ø¸Ø§Ù… ØªÙ…Ø§Ø±ÙŠÙ† ÙƒØ§Ù…Ù„ Ø¯Ø§Ø®Ù„ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·.</p>
        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b" class="img-fluid rounded mt-3">
    </div>
    <div class="card p-4 mb-4">
        <h4>ğŸ¯ Ù…Ø§Ø°Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªÙØ¹Ù„ Ù‡Ù†Ø§ØŸ</h4>
        <ul style="font-size:18px;">
            <li>Ø¥Ø¯Ø§Ø±Ø© ØªÙ…Ø§Ø±ÙŠÙ†Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</li>
            <li>Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ / Ø­Ø°Ù Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</li>
            <li>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø£Ø³Ø¨ÙˆØ¹ÙŠ ÙƒØ§Ù…Ù„</li>
            <li>Ù…ØªØ§Ø¨Ø¹Ø© ØªÙ‚Ø¯Ù… ÙˆØ²Ù†Ùƒ</li>
            <li>Ø±ÙØ¹ ØµÙˆØ± Before / After</li>
            <li>Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„ØªÙ‚Ø¯Ù…Ùƒ</li>
            <li>ØªØ§ÙŠÙ…Ø± Ù„Ù„Ø¬Ù„Ø³Ø§Øª ÙˆÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø©</li>
            <li>Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØªØµØ¯ÙŠØ± ÙƒØ§Ù…Ù„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
        </ul>
    </div>
</div>

<!-- WORKOUTS PAGE -->
<div class="container page" id="workouts">
    <div class="card p-4 mb-4">
        <h3>ğŸ’ª Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ† Ø¬Ø¯ÙŠØ¯</h3>
        <div>
            <span class="category-pill" onclick="setCat('ØµØ¯Ø±')">ØµØ¯Ø±</span>
            <span class="category-pill" onclick="setCat('Ø¸Ù‡Ø±')">Ø¸Ù‡Ø±</span>
            <span class="category-pill" onclick="setCat('ÙƒØªØ§Ù')">ÙƒØªØ§Ù</span>
            <span class="category-pill" onclick="setCat('Ø°Ø±Ø§Ø¹')">Ø°Ø±Ø§Ø¹</span>
            <span class="category-pill" onclick="setCat('Ø£Ø±Ø¬Ù„')">Ø£Ø±Ø¬Ù„</span>
            <span class="category-pill" onclick="setCat('ÙƒØ§Ø±Ø¯ÙŠÙˆ')">ÙƒØ§Ø±Ø¯ÙŠÙˆ</span>
        </div>
        <h5 class="mt-2">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±: <span id="selectedCat" style="color:var(--accent)">Ù„Ø§ Ø´ÙŠØ¡</span></h5>
        <div class="row mt-3">
            <div class="col-md-4 mb-2"><input id="w_name" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†"></div>
            <div class="col-md-2 mb-2"><input id="w_weight" type="number" class="form-control" placeholder="ÙˆØ²Ù†"></div>
            <div class="col-md-2 mb-2"><input id="w_reps" type="number" class="form-control" placeholder="Ø¹Ø¯Ø§Øª"></div>
            <div class="col-md-2 mb-2"><input id="w_sets" type="number" class="form-control" placeholder="Ø¬Ù„Ø³Ø§Øª"></div>
            <div class="col-md-2 mb-2"><button class="btn btn-main w-100" onclick="addWorkout()">Ø¥Ø¶Ø§ÙØ©</button></div>
        </div>
        <input id="searchBox" class="form-control mt-3" placeholder="Ø¨Ø­Ø«â€¦" onkeyup="searchWorkouts()">
    </div>
    <div class="card p-4 mb-4">
        <h3>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</h3>
        <table class="table table-dark text-center" id="workoutTable">
            <tr>
                <th>Ø§Ù„Ù‚Ø³Ù…</th>
                <th>Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th>
                <th>Ø§Ù„ÙˆØ²Ù†</th>
                <th>Ø§Ù„Ø¹Ø¯Ø§Øª</th>
                <th>Ø§Ù„Ø¬Ù„Ø³Ø§Øª</th>
                <th>ØªØ¹Ø¯ÙŠÙ„</th>
                <th>Ø­Ø°Ù</th>
            </tr>
        </table>
    </div>
</div>

<!-- WEEK PAGE -->
<div class="container page" id="week">
    <div class="card p-4 mb-4">
        <h3>ğŸ“† Ø¨Ø±Ù†Ø§Ù…Ø¬Ùƒ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
        <select id="daySelect" class="form-control mb-3">
            <option>Ø§Ù„Ø³Ø¨Øª</option>
            <option>Ø§Ù„Ø£Ø­Ø¯</option>
            <option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
            <option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
            <option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
            <option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
            <option>Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
        </select>
        <input id="dayWorkout" class="form-control mb-3" placeholder="ØªÙ…Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…">
        <button class="btn btn-main w-100" onclick="addDayWorkout()">âœ” Ø¥Ø¶Ø§ÙØ© Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…</button>
    </div>
    <div class="card p-4 mb-4">
        <h3>ğŸ“‹ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙƒØ§Ù…Ù„</h3>
        <ul id="weekList" style="font-size:20px;"></ul>
    </div>
</div>

<!-- PROGRESS PAGE -->
<div class="container page" id="progress">
    <div class="card p-4 mb-4">
        <h3>âš– ÙˆØ²Ù† Ø§Ù„Ø¬Ø³Ù…</h3>
        <div class="row">
            <div class="col-md-6 mb-3"><input id="bodyWeight" type="number" class="form-control" placeholder="ÙˆØ²Ù†Ùƒ Ø§Ù„Ø¢Ù†"></div>
            <div class="col-md-6 mb-3"><button class="btn btn-main w-100" onclick="addWeight()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ²Ù†</button></div>
        </div>
        <canvas id="weightChart"></canvas>
    </div>
    <div class="card p-4 mb-4">
        <h3>ğŸ“¸ ØµÙˆØ± Before & After</h3>
        <input id="progressImg" type="file" accept="image/*" class="form-control" onchange="uploadImage()">
        <div class="row mt-3" id="imgGallery"></div>
    </div>
</div>

<!-- STATS PAGE -->
<div class="container page" id="stats">
    <div class="card p-4 mb-4">
        <h3>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</h3>
        <canvas id="exerciseChart"></canvas>
    </div>
</div>

<!-- SETTINGS PAGE -->
<div class="container page" id="settings">
    <div class="card p-4 mb-4">
        <h3>âš™ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
        <button class="btn btn-main w-100 mb-3" onclick="exportData()">ğŸ“¤ ØªØµØ¯ÙŠØ± ÙƒØ§Ù…Ù„</button>
        <input id="importFile" class="form-control mb-3" type="file" onchange="importData()">
        <button class="btn btn-danger w-100" onclick="resetAll()">ğŸ—‘ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>
</div>

<script>
// =================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙØ­Ø§Øª ===================
function showPage(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

// =================== Ø§Ù„Ø«ÙŠÙ… ===================
function toggleTheme(){
    document.body.classList.toggle('light');
    localStorage.setItem('theme', document.body.classList.contains('light')?'light':'dark');
}
if(localStorage.getItem('theme')==='light') document.body.classList.add('light');

// =================== Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ===================
let workouts = JSON.parse(localStorage.getItem("workouts")||"[]");
let selectedCategory = "";
let workoutTable = document.getElementById("workoutTable");

function setCat(cat){ selectedCategory=cat; document.getElementById("selectedCat").innerText=cat; }
function saveWorkouts(){ localStorage.setItem("workouts",JSON.stringify(workouts)); }

function addWorkout(){
    let name=document.getElementById("w_name").value;
    let weight=document.getElementById("w_weight").value;
    let reps=document.getElementById("w_reps").value;
    let sets=document.getElementById("w_sets").value;
    if(!selectedCategory||!name||!weight||!reps||!sets){ alert("âš  Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù…"); return; }
    workouts.push({category:selectedCategory,name,weight,reps,sets});
    saveWorkouts();
    loadWorkoutTable();
    clearWorkoutForm();
    alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­");
}

function clearWorkoutForm(){
    document.getElementById("w_name").value="";
    document.getElementById("w_weight").value="";
    document.getElementById("w_reps").value="";
    document.getElementById("w_sets").value="";
}

function loadWorkoutTable(){
    workoutTable.innerHTML=`<tr>
        <th>Ø§Ù„Ù‚Ø³Ù…</th><th>Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th><th>Ø§Ù„ÙˆØ²Ù†</th><th>Ø§Ù„Ø¹Ø¯Ø§Øª</th><th>Ø§Ù„Ø¬Ù„Ø³Ø§Øª</th><th>ØªØ¹Ø¯ÙŠÙ„</th><th>Ø­Ø°Ù</th>
    </tr>`;
    workouts.forEach((w,i)=>{
        let row = workoutTable.insertRow();
        row.insertCell(0).innerText=w.category;
        row.insertCell(1).innerText=w.name;
        row.insertCell(2).innerText=w.weight;
        row.insertCell(3).innerText=w.reps;
        row.insertCell(4).innerText=w.sets;
        row.insertCell(5).innerHTML=`<button class="btn btn-warning btn-sm" onclick="editWorkout(${i})">âœ</button>`;
        row.insertCell(6).innerHTML=`<button class="btn btn-danger btn-sm" onclick="deleteWorkout(${i})">ğŸ—‘</button>`;
    });
}

function editWorkout(i){
    let w=workouts[i];
    let newName=prompt("Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†:",w.name)||w.name;
    let newWeight=prompt("Ø§Ù„ÙˆØ²Ù†:",w.weight)||w.weight;
    let newReps=prompt("Ø§Ù„Ø¹Ø¯Ø§Øª:",w.reps)||w.reps;
    let newSets=prompt("Ø§Ù„Ø¬Ù„Ø³Ø§Øª:",w.sets)||w.sets;
    workouts[i]={category:w.category,name:newName,weight:newWeight,reps:newReps,sets:newSets};
    saveWorkouts(); loadWorkoutTable();
}

function deleteWorkout(i){ if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ…Ø±ÙŠÙ†ØŸ")){ workouts.splice(i,1); saveWorkouts(); loadWorkoutTable(); } }

function searchWorkouts(){
    let filter=document.getElementById("searchBox").value.toLowerCase();
    Array.from(workoutTable.rows).forEach((row,i)=>{ if(i==0) return; row.style.display=row.innerText.toLowerCase().includes(filter)?"":"none"; });
}

// =================== Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ ===================
let weekPlan = JSON.parse(localStorage.getItem("weekPlan")||"{}");
function addDayWorkout(){
    let day=document.getElementById("daySelect").value;
    let w=document.getElementById("dayWorkout").value;
    if(!w){ alert("âš  Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†"); return; }
    if(!weekPlan[day]) weekPlan[day]=[];
    weekPlan[day].push(w);
    localStorage.setItem("weekPlan",JSON.stringify(weekPlan));
    loadWeekList();
    document.getElementById("dayWorkout").value="";
}

function loadWeekList(){
    let ul=document.getElementById("weekList");
    ul.innerHTML="";
    ["Ø§Ù„Ø³Ø¨Øª","Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©"].forEach(day=>{
        if(weekPlan[day]){
            let li=document.createElement("li");
            li.innerHTML=`<b>${day}:</b> ${weekPlan[day].join(", ")}`;
            ul.appendChild(li);
        }
    });
}

// =================== Ø§Ù„ØªÙ‚Ø¯Ù… ===================
let weightData = JSON.parse(localStorage.getItem("weightData")||"[]");
let imgData = JSON.parse(localStorage.getItem("imgData")||"[]");

function addWeight(){
    let w=document.getElementById("bodyWeight").value;
    if(!w) return;
    let today=new Date().toLocaleDateString();
    weightData.push({date:today,value:w});
    localStorage.setItem("weightData",JSON.stringify(weightData));
    loadWeightChart();
    document.getElementById("bodyWeight").value="";
}

function loadWeightChart(){
    let ctx=document.getElementById("weightChart").getContext("2d");
    if(window.weightChart) window.weightChart.destroy();
    window.weightChart=new Chart(ctx,{
        type:'line',
        data:{
            labels: weightData.map(d=>d.date),
            datasets:[{
                label:"ÙˆØ²Ù† Ø§Ù„Ø¬Ø³Ù…",
                data:weightData.map(d=>d.value),
                borderColor:"#0af",
                backgroundColor:"#0af33"
            }]
        }
    });
}

function uploadImage(){
    let file=document.getElementById("progressImg").files[0];
    if(!file) return;
    let reader=new FileReader();
    reader.onload=e=>{
        imgData.push(e.target.result);
        localStorage.setItem("imgData",JSON.stringify(imgData));
        loadImages();
    };
    reader.readAsDataURL(file);
}

function loadImages(){
    let gallery=document.getElementById("imgGallery");
    gallery.innerHTML="";
    imgData.forEach((src,i)=>{
        let div=document.createElement("div");
        div.className="col-md-3 mb-3 position-relative";
        div.innerHTML=`<img src="${src}" class="progress-img">
                       <button class="btn btn-danger position-absolute" onclick="deleteImage(${i})">ğŸ—‘</button>`;
        gallery.appendChild(div);
    });
}

function deleteImage(i){
    if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø©ØŸ")){
        imgData.splice(i,1);
        localStorage.setItem("imgData",JSON.stringify(imgData));
        loadImages();
    }
}

// =================== Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ===================
function loadExerciseChart(){
    let counts={};
    workouts.forEach(w=>counts[w.category]=(counts[w.category]||0)+1);
    let ctx=document.getElementById("exerciseChart").getContext("2d");
    if(window.exerciseChart) window.exerciseChart.destroy();
    window.exerciseChart=new Chart(ctx,{
        type:'bar',
        data:{
            labels:Object.keys(counts),
            datasets:[{
                label:"Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ù„ÙƒÙ„ Ù‚Ø³Ù…",
                data:Object.values(counts),
                backgroundColor:"#0af"
            }]
        }
    });
}

// =================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ===================
function exportData(){
    let data={workouts,weekPlan,weightData,imgData};
    let blob=new Blob([JSON.stringify(data)],{type:"application/json"});
    let a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download="UltraFitnessData.json";
    a.click();
}

function importData(){
    let file=document.getElementById("importFile").files[0];
    if(!file) return;
    let reader=new FileReader();
    reader.onload=e=>{
        let data=JSON.parse(e.target.result);
        workouts=data.workouts||[]; weekPlan=data.weekPlan||{}; weightData=data.weightData||[]; imgData=data.imgData||[];
        saveWorkouts();
        localStorage.setItem("weekPlan",JSON.stringify(weekPlan));
        localStorage.setItem("weightData",JSON.stringify(weightData));
        localStorage.setItem("imgData",JSON.stringify(imgData));
        loadWorkoutTable(); loadWeekList(); loadWeightChart(); loadImages(); loadExerciseChart();
        alert("âœ… ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­");
    };
    reader.readAsText(file);
}

function resetAll(){
    if(confirm("âš  Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){ localStorage.clear(); location.reload(); }
}

// =================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ===================
loadWorkoutTable(); loadWeekList(); loadWeightChart(); loadImages(); loadExerciseChart();
    // =================== ØªØ§ÙŠÙ…Ø± Ø§Ù„ØªÙ…Ø±ÙŠÙ† ===================
let timerInterval;
let timerSeconds = 0;
let timerMode = "ØªÙ…Ø±ÛŒÙ†"; // ØªÙ…Ø±ÙŠÙ† Ø£Ùˆ Ø±Ø§Ø­Ø©

function startTimer(workDuration=30, restDuration=15) {
    clearInterval(timerInterval);
    timerSeconds = workDuration;
    timerMode = "ØªÙ…Ø±ÛŒÙ†";
    showTimerUI();
    timerInterval = setInterval(() => {
        document.getElementById("timerDisplay").innerText = `${timerMode}: ${timerSeconds}s`;
        timerSeconds--;
        if (timerSeconds < 0) {
            if (timerMode === "ØªÙ…Ø±ÛŒÙ†") {
                timerMode = "Ø±Ø§Ø­Ø©";
                timerSeconds = restDuration;
            } else {
                timerMode = "ØªÙ…Ø±ÛŒÙ†";
                timerSeconds = workDuration;
            }
        }
    }, 1000);
}

function stopTimer() {
    clearInterval(timerInterval);
    document.getElementById("timerDisplay").innerText = "â± ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª";
}

function showTimerUI() {
    if(!document.getElementById("timerContainer")) {
        let div = document.createElement("div");
        div.id = "timerContainer";
        div.className = "card p-4 mb-4";
        div.innerHTML = `
            <h3>â± Ù…Ø¤Ù‚Øª Ø§Ù„ØªÙ…Ø±ÙŠÙ†</h3>
            <div class="row mb-3">
                <div class="col-md-4"><input id="workInput" type="number" class="form-control" placeholder="Ø«ÙˆØ§Ù†ÙŠ Ø§Ù„ØªÙ…Ø±ÙŠÙ†"></div>
                <div class="col-md-4"><input id="restInput" type="number" class="form-control" placeholder="Ø«ÙˆØ§Ù†ÙŠ Ø§Ù„Ø±Ø§Ø­Ø©"></div>
                <div class="col-md-4"><button class="btn btn-main w-100" onclick="startTimer(+document.getElementById('workInput').value||30, +document.getElementById('restInput').value||15)">â–¶ Ø§Ø¨Ø¯Ø£</button></div>
            </div>
            <h2 id="timerDisplay">â± Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚</h2>
            <button class="btn btn-danger mt-2" onclick="stopTimer()">â–  Ø¥ÙŠÙ‚Ø§Ù</button>
        `;
        document.body.prepend(div);
    }
}

</script>

</body>
</html>

